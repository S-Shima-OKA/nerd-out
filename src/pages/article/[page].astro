---
import { itemSort } from '../../utils/util';
import Layout from '../../layouts/Layout.astro';
import PageTitle from '../../components/PageTitle.astro';
import BlogPost from '../../components/BlogPost.astro';

export async function getStaticPaths({ paginate }) {
    const allPosts = await Astro.glob("./items/*.md");
    const extendArray = Array(10).fill().map((_, i) => allPosts[i % allPosts.length]);
    itemSort(allPosts);

    return paginate(itemSort(allPosts), { pageSize: 6 }); // ページあたりの記事数を設定
}
const { page } = Astro.props;
---
<Layout title="Article" desc="これまでの記事一覧。">
    <PageTitle title="Article" lead="これまでの記事一覧" />
    <!-- Card Blog -->
    <BlogPost 
        sortFunc={page.data} 
        isTotal={page.total}
        isPrev={page.url.prev}
        isNext={page.url.next}
        isCurrentPage={page.currentPage}
    />
</Layout>